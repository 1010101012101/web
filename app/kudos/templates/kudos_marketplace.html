{% load i18n static %}
<!DOCTYPE html>
<html>
  <head>
    {% include 'shared/head.html' %}
    {% include 'shared/cards_pic.html' %}
    <link rel="stylesheet" href="{% static "v2/css/kudos/styles.css" %}" />
  </head>
  <body class="{{ active }} bg-light">
    <header class="container-fluid header">
      {% include 'shared/nav.html' %}
      {% include 'shared/kudos_banner.html' %}
      <div class="container pb-5">
        {% include 'shared/kudos_searchbar.html' %}
      </div>
    </header>
    
    <section class="container mt-5 pb-5">
      <div class="row justify-content-between p-3">
        <div class="">{{listings.count}} Kudos</div>
        {% blocktrans %} 
          <div>Sort by: Price <a href="">Low</a> - <a href="">High</a></div>
        {% endblocktrans %}
      </div>
      <div class="row justify-content-center">
        {% for listing in listings %}
          <div class="col-xs-12 col-sm-6 col-lg-3 mb-3">
            {% include 'shared/kudos_card.html' %}
          </div>
        {% if forloop.counter|divisibleby:4 %}
      </div>
      <div class="row justify-content-center">
        {% endif %}
      {% endfor %}
        <div class="col-xs-12 col-sm-6 col-lg-3 mb-3">
            <a href="{% url 'kudos_mint' %}" class="cta-square kd-shadow">
              <div>
                <span>{% trans "Donâ€™t See One You Like?" %}</span>
                <small>{% trans "Mint Your Own!" %}</small>
              </div>
            </a>
        </div>
      </div>
    </section>

    {% include 'shared/footer.html' %}
    {% include 'shared/analytics.html' %}
    {% include 'shared/footer_scripts.html' with slim=1 %}
    <script src="{% static "v2/js/popper.min.js" %}"></script>
    <script src="{% static "v2/js/bootstrap.min.js" %}"></script>
    <script>
      var bootstrapTooltip = $.fn.tooltip.noConflict()
    </script>
    <script>

    $(document).ready(function() {
      var queryParam = getParameterByName('q')
      
      $('#kudos-search').val(queryParam)
      checkSearch()
    })
    var searchInput = $('#kudos-search')
    var clearBtn = $('.clear-search')
    
    searchInput.change(  function () {
      checkSearch()
    })
    function checkSearch(){ 
      console.log('test')
      if (searchInput.val() === '') {
        clearBtn.addClass('hidden')
      } else {
        clearBtn.removeClass('hidden')
      }
    }

    function getParameterByName(name) {
      name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
      var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
          results = regex.exec(location.search);
      return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
    }

   
    </script>
    {% include 'shared/rollbar.html' %}
    {% include 'shared/messages.html' %
  <!-- <script src="js/web3.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
    <script src="js/truffle-contract.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>